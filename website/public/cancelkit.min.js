(()=>{let r={vendorKey:null,userId:null,buttonText:"Cancel subscription",modalTitle:"Cancel Subscription",modalMessage:"Are you sure you want to cancel your subscription?",confirmButtonText:"Yes, cancel",cancelButtonText:"No, keep it",apiUrl:"https://us-central1-cancelready-a49e7.cloudfunctions.net/cancelHandler",successMessage:"Your subscription has been successfully canceled.",errorMessage:"Failed to cancel subscription. Please try again or contact support."};function t(){var e,t=document.getElementById("cr-target");t&&((e=document.createElement("button")).textContent=r.buttonText,e.className="cr-button bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded",e.addEventListener("click",n),t.appendChild(e))}function n(){let e=document.createElement("div");e.className="cr-modal-backdrop fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";var t=document.createElement("div"),n=(t.className="cr-modal bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto",document.createElement("div")),o=(n.className="text-lg font-bold mb-4",n.textContent=r.modalTitle,document.createElement("p")),d=(o.className="mb-6 text-gray-600",o.textContent=r.modalMessage,document.createElement("div")),c=(d.className="flex justify-end space-x-3",document.createElement("button")),a=(c.className="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-100",c.textContent=r.cancelButtonText,c.addEventListener("click",()=>{document.body.removeChild(e)}),document.createElement("button"));a.className="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",a.textContent=r.confirmButtonText,a.addEventListener("click",()=>{document.body.removeChild(e),r.vendorKey&&r.userId?fetch(r.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorKey:r.vendorKey,userId:r.userId})}).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{s(r.successMessage,"success")}).catch(e=>{s(r.errorMessage,"error"),console.error("Error canceling subscription:",e)}):s(r.errorMessage+" Missing vendorKey or userId.","error")}),d.appendChild(c),d.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(d),e.appendChild(t),document.body.appendChild(e)}function s(e,t){let n=document.createElement("div");n.className="cr-toast fixed bottom-4 right-4 py-2 px-4 rounded shadow-lg z-50 "+("success"===t?"bg-green-500 text-white":"bg-red-500 text-white"),n.textContent=e,document.body.appendChild(n),setTimeout(()=>{document.body.contains(n)&&document.body.removeChild(n)},3e3)}window.CancelReady={init:function(e={}){Object.assign(r,e),document.getElementById("tailwind-css")||((e=document.createElement("script")).src="https://cdn.tailwindcss.com",e.id="tailwind-css",document.head.appendChild(e)),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}}})();