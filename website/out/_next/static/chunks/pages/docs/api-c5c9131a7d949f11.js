(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{323:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/api",function(){return n(2997)}])},2997:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(5893),s=n(2191),r=n(1664),i=n.n(r),o=n(7294),c=n(4282);let d=[{id:"initialization",name:"Initialization",description:"Initialize the CancelReady library",method:"CancelReady.init(config)",params:[{name:"vendorKey",type:"string",required:!0,description:"Your unique vendor identifier"},{name:"userId",type:"string",required:!0,description:"Current user's unique identifier that MUST match how the user is stored in your payment processor. For Stripe, this should match the ID stored in subscription metadata. For Paddle, this should match the ID stored in the passthrough field."},{name:"buttonText",type:"string",required:!1,description:"Custom text for the cancel button",default:'"Cancel subscription"'},{name:"buttonColor",type:"string",required:!1,description:"HEX color code for the button",default:'"#ef4444"'},{name:"testMode",type:"boolean",required:!1,description:"Enable test mode (no actual cancellations)",default:"false"},{name:"modalTitle",type:"string",required:!1,description:"Custom title for the cancellation modal",default:'"Cancel Your Subscription"'},{name:"modalMessage",type:"string",required:!1,description:"Custom message in the cancellation modal",default:'"Are you sure you want to cancel?"'},{name:"confirmButtonText",type:"string",required:!1,description:"Text for the confirm button in modal",default:'"Yes, Cancel Now"'},{name:"cancelButtonText",type:"string",required:!1,description:"Text for the cancel button in modal",default:'"No, Keep My Subscription"'},{name:"apiUrl",type:"string",required:!1,description:"Custom API endpoint for cancellation requests",default:'"https://api.cancelready.com/cancel"'},{name:"onSuccess",type:"function",required:!1,description:"Callback function after successful cancellation",default:"null"},{name:"onError",type:"function",required:!1,description:"Callback function after failed cancellation",default:"null"},{name:"collectFeedback",type:"boolean",required:!1,description:"Enable cancellation reason collection",default:"false"},{name:"feedbackOptions",type:"array",required:!1,description:"Array of predefined cancellation reasons",default:"[]"}]},{id:"cancel",name:"Manual Cancellation",description:"Programmatically trigger the cancellation flow",method:"CancelReady.cancel(options)",params:[{name:"skipConfirmation",type:"boolean",required:!1,description:"Skip the confirmation modal",default:"false"},{name:"reason",type:"string",required:!1,description:"Pre-filled cancellation reason",default:"null"},{name:"metadata",type:"object",required:!1,description:"Additional data to include with cancellation",default:"{}"}]},{id:"update",name:"Update Configuration",description:"Update CancelReady configuration after initialization",method:"CancelReady.updateConfig(config)",params:[{name:"config",type:"object",required:!0,description:"Configuration object with properties to update"}]},{id:"destroy",name:"Destroy Instance",description:"Remove CancelReady from the page",method:"CancelReady.destroy()",params:[]},{id:"events",name:"Event Listeners",description:"Subscribe to CancelReady events",method:"CancelReady.on(event, callback)",params:[{name:"event",type:"string",required:!0,description:'Event name to listen for (e.g., "cancel:success", "cancel:error", "modal:open", "modal:close")'},{name:"callback",type:"function",required:!0,description:"Function to call when the event occurs"}]}],l=[{id:"post-cancel",name:"POST /cancel",description:"Process a cancellation request",url:"https://api.cancelready.com/cancel",method:"POST",note:"The userId parameter must match exactly how the user is identified in your payment processor. For Stripe, this should match the ID stored in subscription metadata. For Paddle, this should match the ID stored in the passthrough field.",headers:[{name:"Content-Type",value:"application/json",required:!0},{name:"Authorization",value:"Bearer YOUR_API_KEY",required:!0}],body:{vendorKey:"your_vendor_key",userId:"user_123",subscriptionId:"sub_456",reason:"No longer needed",metadata:{plan:"premium",billingCycle:"monthly"}},response:{success:!0,cancellationId:"can_789",message:"Subscription successfully cancelled",effectiveDate:"2025-05-25T00:00:00Z"}},{id:"get-cancellations",name:"GET /cancellations",description:"Retrieve cancellation records",url:"https://api.cancelready.com/cancellations",method:"GET",headers:[{name:"Authorization",value:"Bearer YOUR_API_KEY",required:!0}],queryParams:[{name:"vendorKey",required:!0,description:"Your vendor key"},{name:"startDate",required:!1,description:"Filter by start date (ISO format)"},{name:"endDate",required:!1,description:"Filter by end date (ISO format)"},{name:"limit",required:!1,description:"Number of records to return (default: 50, max: 100)"},{name:"offset",required:!1,description:"Pagination offset"}],response:{cancellations:[{id:"can_789",vendorKey:"your_vendor_key",userId:"user_123",subscriptionId:"sub_456",reason:"No longer needed",status:"completed",timestamp:"2025-05-24T15:30:00Z",metadata:{plan:"premium",billingCycle:"monthly"}}],total:1,limit:50,offset:0}},{id:"get-reports",name:"GET /reports",description:"Retrieve compliance reports",url:"https://api.cancelready.com/reports",method:"GET",headers:[{name:"Authorization",value:"Bearer YOUR_API_KEY",required:!0}],queryParams:[{name:"vendorKey",required:!0,description:"Your vendor key"},{name:"year",required:!1,description:"Filter by year (e.g., 2025)"},{name:"month",required:!1,description:"Filter by month (1-12)"}],response:{reports:[{id:"rep_123",vendorKey:"your_vendor_key",year:2025,month:5,url:"https://storage.cancelready.com/reports/your_vendor_key/2025-05.pdf",generatedAt:"2025-06-01T00:00:00Z"}]}}];function m(){let[e,t]=(0,o.useState)("initialization");return(0,a.jsx)(s.Z,{title:"API Reference - CancelReady",children:(0,a.jsxs)("div",{className:"bg-white",children:[(0,a.jsx)("div",{className:"bg-primary-600 text-white py-12",children:(0,a.jsxs)("div",{className:"container-custom",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-primary-100 mb-2",children:[(0,a.jsx)(i(),{href:"/docs",className:"hover:text-white",children:"Documentation"}),(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"API Reference"})]}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"API Reference"}),(0,a.jsx)("p",{className:"text-primary-100 max-w-3xl",children:"Comprehensive documentation for the CancelReady JavaScript library and REST API."})]})}),(0,a.jsx)("div",{className:"container-custom py-12",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsx)("div",{className:"lg:w-64 flex-shrink-0",children:(0,a.jsxs)("div",{className:"sticky top-8",children:[(0,a.jsx)("h2",{className:"text-xs font-semibold text-secondary-900 uppercase tracking-wider mb-3",children:"JavaScript Library"}),(0,a.jsx)("nav",{className:"space-y-1 mb-8",children:d.map(n=>(0,a.jsx)("button",{onClick:()=>t(n.id),className:"flex items-center px-4 py-2 w-full text-left text-sm rounded-md ".concat(e===n.id?"bg-primary-50 text-primary-700 font-medium":"text-secondary-600 hover:bg-secondary-50"),children:n.name},n.id))}),(0,a.jsx)("h2",{className:"text-xs font-semibold text-secondary-900 uppercase tracking-wider mb-3",children:"REST API"}),(0,a.jsx)("nav",{className:"space-y-1",children:l.map(n=>(0,a.jsx)("button",{onClick:()=>t(n.id),className:"flex items-center px-4 py-2 w-full text-left text-sm rounded-md ".concat(e===n.id?"bg-primary-50 text-primary-700 font-medium":"text-secondary-600 hover:bg-secondary-50"),children:n.name},n.id))}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-secondary-50 rounded-md",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-secondary-900 mb-2",children:"Need help?"}),(0,a.jsx)("p",{className:"text-sm text-secondary-600 mb-3",children:"Can't find what you're looking for?"}),(0,a.jsx)(i(),{href:"/support",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:"Contact Support â†’"})]})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[d.map(t=>e===t.id&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:t.name}),(0,a.jsx)("p",{className:"text-secondary-600 mb-6",children:t.description}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Method Signature"}),(0,a.jsx)("div",{className:"bg-secondary-800 text-white p-4 rounded-md overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-sm",children:t.method})})]}),t.params.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Parameters"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,a.jsx)("thead",{className:"bg-secondary-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Required"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Default"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Description"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:t.params.map((e,t)=>(0,a.jsxs)("tr",{className:t%2==0?"bg-white":"bg-secondary-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600",children:(0,a.jsx)("code",{className:"bg-secondary-100 px-2 py-1 rounded text-secondary-800",children:e.type})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600",children:e.required?(0,a.jsx)("span",{className:"text-red-600",children:"Yes"}):(0,a.jsx)("span",{className:"text-secondary-500",children:"No"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600",children:e.default||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-secondary-600",children:e.description})]},t))})]})})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Example"}),(0,a.jsx)("div",{className:"bg-secondary-800 text-white p-4 rounded-md overflow-x-auto",children:(0,a.jsxs)("pre",{className:"text-sm",children:["initialization"===t.id&&"// Initialize CancelReady with basic configuration\nCancelReady.init({\n  vendorKey: 'your_vendor_key',\n  userId: 'current_user_id',\n  buttonText: 'Cancel my subscription',\n  buttonColor: '#3b82f6',\n  testMode: false,\n  onSuccess: function(data) {\n    console.log('Cancellation successful:', data);\n  },\n  onError: function(error) {\n    console.error('Cancellation failed:', error);\n  }\n});","cancel"===t.id&&"// Trigger cancellation programmatically\ndocument.getElementById('cancel-button').addEventListener('click', function() {\n  CancelReady.cancel({\n    skipConfirmation: false,\n    reason: 'Moving to a different service',\n    metadata: {\n      currentPlan: 'premium',\n      userSince: '2024-10-15'\n    }\n  });\n});","update"===t.id&&"// Update configuration after initialization\nCancelReady.updateConfig({\n  buttonText: 'Cancel your plan',\n  buttonColor: '#10b981',\n  modalTitle: 'We hate to see you go!',\n  collectFeedback: true,\n  feedbackOptions: [\n    'Too expensive',\n    'Not using enough',\n    'Found a better alternative',\n    'Missing features',\n    'Other'\n  ]\n});","destroy"===t.id&&"// Remove CancelReady from the page\n// This is useful when navigating away or when the component unmounts\nCancelReady.destroy();","events"===t.id&&"// Listen for cancellation events\nCancelReady.on('modal:open', function() {\n  console.log('Cancellation modal opened');\n  // Track analytics event\n  analytics.track('cancellation_modal_opened');\n});\n\nCancelReady.on('cancel:success', function(data) {\n  console.log('Subscription cancelled successfully', data);\n  // Redirect to feedback page\n  window.location.href = '/feedback?cancellation_id=' + data.cancellationId;\n});\n\nCancelReady.on('cancel:error', function(error) {\n  console.error('Cancellation failed', error);\n  // Show custom error message\n  showErrorNotification('Unable to process your cancellation. Please contact support.');\n});"]})})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:["initialization"===t.id&&"The init method should be called only once per page. If you need to update the configuration later, use the updateConfig method.","cancel"===t.id&&"When skipConfirmation is set to true, the cancellation will be processed immediately without showing the confirmation modal. Use with caution.","update"===t.id&&"The updateConfig method only updates the properties you specify. Other properties will retain their current values.","destroy"===t.id&&"After calling destroy(), you'll need to call init() again if you want to re-initialize CancelReady.","events"===t.id&&"Event listeners persist until CancelReady.destroy() is called or the page is unloaded."]})})})})]},t.id)),l.map(t=>e===t.id&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-secondary-900 mb-2",children:t.name}),(0,a.jsx)("p",{className:"text-secondary-600 mb-6",children:t.description}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Endpoint"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-green-100 text-green-800",children:t.method}),(0,a.jsx)("code",{className:"text-sm bg-secondary-100 px-2 py-1 rounded",children:t.url})]})]}),t.headers.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Headers"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,a.jsx)("thead",{className:"bg-secondary-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Value"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Required"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:t.headers.map((e,t)=>(0,a.jsxs)("tr",{className:t%2==0?"bg-white":"bg-secondary-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600",children:(0,a.jsx)("code",{className:"bg-secondary-100 px-2 py-1 rounded text-secondary-800",children:e.value})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600",children:e.required?(0,a.jsx)("span",{className:"text-red-600",children:"Yes"}):(0,a.jsx)("span",{className:"text-secondary-500",children:"No"})})]},t))})]})})]}),t.queryParams&&t.queryParams.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Query Parameters"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,a.jsx)("thead",{className:"bg-secondary-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Required"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Description"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:t.queryParams.map((e,t)=>(0,a.jsxs)("tr",{className:t%2==0?"bg-white":"bg-secondary-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600",children:e.required?(0,a.jsx)("span",{className:"text-red-600",children:"Yes"}):(0,a.jsx)("span",{className:"text-secondary-500",children:"No"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-secondary-600",children:e.description})]},t))})]})})]}),t.body&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Request Body"}),t.note&&(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,a.jsx)("strong",{children:"Important:"})," ",t.note]})}),(0,a.jsx)("div",{className:"bg-secondary-800 text-white p-4 rounded-md overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-sm",children:JSON.stringify(t.body,null,2)})})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Response"}),(0,a.jsx)("div",{className:"bg-secondary-800 text-white p-4 rounded-md overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-sm",children:JSON.stringify(t.response,null,2)})})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mb-3",children:"Example Request"}),(0,a.jsx)("div",{className:"bg-secondary-800 text-white p-4 rounded-md overflow-x-auto",children:(0,a.jsxs)("pre",{className:"text-sm",children:["POST"===t.method&&"// Using fetch API\nfetch('".concat(t.url,"', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer YOUR_API_KEY'\n  },\n  body: JSON.stringify(").concat(JSON.stringify(t.body,null,2),")\n})\n.then(response => response.json())\n.then(data => console.log(data))\n.catch(error => console.error('Error:', error));"),"GET"===t.method&&"// Using fetch API\nfetch('".concat(t.url,"?vendorKey=your_vendor_key").concat("get-reports"===t.id?"&year=2025&month=5":"&startDate=2025-05-01T00:00:00Z&endDate=2025-05-25T23:59:59Z&limit=50&offset=0","', {\n  method: 'GET',\n  headers: {\n    'Authorization': 'Bearer YOUR_API_KEY'\n  }\n})\n.then(response => response.json())\n.then(data => console.log(data))\n.catch(error => console.error('Error:', error));")]})})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:["post-cancel"===t.id&&"This endpoint requires authentication with a valid API key. Cancellations are processed immediately and cannot be undone.","get-cancellations"===t.id&&"This endpoint supports pagination. Use the limit and offset parameters to navigate through large result sets.","get-reports"===t.id&&"Monthly reports are generated on the 1st day of the following month. Reports are available in PDF format."]})})})})]},t.id))]})]})})]})})}},4282:function(e,t,n){"use strict";var a=n(7294);let s=a.forwardRef(function(e,t){let{title:n,titleId:s,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),n?a.createElement("title",{id:s},n):null,a.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))});t.Z=s}},function(e){e.O(0,[867,191,888,774,179],function(){return e(e.s=323)}),_N_E=e.O()}]);